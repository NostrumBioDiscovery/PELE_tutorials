{
    "licenseDirectoryPath": "/home/ywest",
    "simulationLogPath": "$OUTPUT_PATH/Logfile_",
    "Initialization": {
        "ForceField": "OPLS2005",
        "MultipleComplex" : [ $COMPLEXES ],
        "Solvent": {
            "solventType": "VDGBNP",
            "useDebyeLength": true,
            "ionicStrength": 0.1
        }
    },
    "commands": [
        {
            "commandType": "peleSimulation",
            "RandomGenerator": {
                "seed": $SEED
            },
            "selectionToPerturb": {
                "chains": {
                    "names": [
                        "L"
                    ]
                }
            },
            "PELE_Output": {
                "reportPath": "$OUTPUT_PATH/ain_report",
                "trajectoryPath": "$OUTPUT_PATH/ain_trajectory.pdb",
                "savingMode": "savingTrajectory",
                "savingFrequencyForAcceptedSteps": 1
            },
            "PELE_Parameters": {
                "numberOfPeleSteps" : $PELE_STEPS,
                "temperature": 2000,
                "anmFrequency" : 1,
                "minimizationFrequency" : 1,
                "sideChainPredictionFrequency" : 1,
                "sideChainPredictionRegionRadius": 5,
                "numberOfTopSideSelectedLinks": 20,
                "perturbationCOMConstraintConstant" : 0.1,
                "proximityDistance" : 10
            },
            "Perturbation": {
                  "perturbationType": "naive",
                  "rotationAngles" : "nonCoupled",
		  "translationDirection": "steered",
                  "parameters": {
                       "steeringUpdateFrequency": 2,
                       "rotationScalingFactor": 0,
                       "translationRange": 0,
                       "overlapFactor": 0.7,
                       "numberOfStericTrials": 1000,
                       "numberOfTrials": 1
                     }
                },
            "ANM": {
                "algorithm": "ALPHACARBONS",
                "options": {
                    "pickingCase": "RANDOM_MODE",
                    "modesMixingOption": "mixMainModeWithOthersModes",
                    "directionGeneration": "random"
                },
                "parameters": {
                    "eigenUpdateFrequency": 100000,
                    "displacementFactor": 0.75,
                    "numberOfModes": 6,
                    "relaxationSpringConstant": 0.5,
                    "modesChangeFrequency": 6,
                    "mainModeWeightForMixModes": 0.75
                },
                "anmMinimizer": {
                    "algorithm": "TruncatedNewton",
                    "parameters": {
		    "MaximumMinimizationIterations": 1,
                    "MaximumNewtonIterations": 100,
                    "MinimumRMS": 0.04,
                    "nonBondingListUpdatedEachMinStep": true,
                    "alphaUpdated": false
                    }
                }
            },
            "SideChainPrediction": {
                "sideChainMinimizer": {
                    "algorithm": "TruncatedNewton",
                    "parameters": {
                    "MaximumNewtonIterations": 65,
                    "MinimumRMS": 0.04,
                    "nonBondingListUpdatedEachMinStep": true,
                    "alphaUpdated": true,
		    "sgbUpdated": true
                    }
                },
                "algorithm": "zhexin",
                "parameters": {
                    "randomize": false,
                    "numberOfIterations": 1
                }
            },
                 "includeInMinimization": {
                    "chains": "all"
                },
            "Minimizer": {
                "algorithm": "TruncatedNewton",
                "parameters": {
                    "MaximumNewtonIterations": 65,
                    "MinimumRMS": 0.04,
                    "nonBondingListUpdatedEachMinStep": true,
                    "alphaUpdated": true,
		    "sgbUpdated": true
                }
            },
            "PeleTasks": [
	        {
                    "metrics": [
                        {
                            "type": "com_distance",
                            "selection_group_1": {
                                "atoms": { "ids":["A:2:_CA_"]}
                            },
                            "selection_group_2": {
                                "atoms": { "ids":["A:30:_CA_"]}
                            }
                        },
                        {
                       	   "type" : "bindingEnergy",
                       	   "boundPartSelection" : {"chains": { "names": [ "L" ] } }
                        },
			{
			   "type": "distanceToPoint",
			   "point": [16.63, 15.47, 0.29],
			   "atoms": {
			      "chains" : { "names": [ "L" ] }
			      }
			},
                        {
			   "type": "rmsd",
			   	"Native": {
				   "path": "native.pdb"
			   	},
			    "selection": {
			        "chains": {
				"names": [ "L" ]
				   }
			       },
			   "doSuperposition": false,
			   "includeHydrogens": false,
			   "tag" : "proteinLigandDistance"
			 },
                        {
                            "type": "random",
                            "tag": "rand1"
                        },
                        {
                            "type": "random",
                            "tag": "rand2"
                        }
		   ],
                  "parametersChanges" : [
                     {
                            "ifAnyIsTrue": [ "rand1 >= .5" ],
                            "doThesechanges": {
                            "Perturbation::parameters": { "rotationScalingFactor": 0.30 }
                            },
                            "otherwise": {
                            "Perturbation::parameters": { "rotationScalingFactor": 0.1 }
                                   }
                     },
                     {
                            "ifAnyIsTrue": [ "rand2 >= .5" ],
                            "doThesechanges": {
                                "Perturbation::parameters": {
                                                      "numberOfTrials": 100,
						      "numberOfStericTrials": 25,
                                                      "translationRange": 6.0 }
                                },
                                "otherwise": {
                                "Perturbation::parameters": {
						"numberOfTrials": 5,
                       				"numberOfStericTrials": 250,
                                                      "translationRange": 0.75 }

                                }
                      }
               	   ]
		}
	    ]
        }
    ]
}
